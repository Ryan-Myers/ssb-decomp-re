.include "macros.inc"

# assembler directives
.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches
.set gp=64     # allow use of 64-bit general purpose registers

.section .text

.align 4

# Likely start of new file
glabel __osPfsGetStatus
  /* 037200 80036600 27BDFFD0 */     addiu $sp, $sp, -0x30
  /* 037204 80036604 AFA40030 */        sw $a0, 0x30($sp)
  /* 037208 80036608 AFBF0014 */        sw $ra, 0x14($sp)
  /* 03720C 8003660C AFA50034 */        sw $a1, 0x34($sp)
  /* 037210 80036610 240E00FA */     addiu $t6, $zero, 0xfa
  /* 037214 80036614 3C018004 */       lui $at, %hi(D_8003D5D4)
  /* 037218 80036618 00A02025 */        or $a0, $a1, $zero
  /* 03721C 8003661C A02ED5D4 */        sb $t6, %lo(D_8003D5D4)($at)
  /* 037220 80036620 0C00D9B4 */       jal __osPfsRequestOneChannel
  /* 037224 80036624 00002825 */        or $a1, $zero, $zero
  /* 037228 80036628 3C05800A */       lui $a1, %hi(__osPfsPifRam)
  /* 03722C 8003662C 24A50710 */     addiu $a1, $a1, %lo(__osPfsPifRam)
  /* 037230 80036630 0C00C9D8 */       jal __osSiRawStartDma
  /* 037234 80036634 24040001 */     addiu $a0, $zero, 1
  /* 037238 80036638 8FA40030 */        lw $a0, 0x30($sp)
  /* 03723C 8003663C 27A50028 */     addiu $a1, $sp, 0x28
  /* 037240 80036640 0C00C084 */       jal osRecvMesg
  /* 037244 80036644 24060001 */     addiu $a2, $zero, 1
  /* 037248 80036648 3C05800A */       lui $a1, %hi(__osPfsPifRam)
  /* 03724C 8003664C 24A50710 */     addiu $a1, $a1, %lo(__osPfsPifRam)
  /* 037250 80036650 0C00C9D8 */       jal __osSiRawStartDma
  /* 037254 80036654 00002025 */        or $a0, $zero, $zero
  /* 037258 80036658 AFA2002C */        sw $v0, 0x2c($sp)
  /* 03725C 8003665C 8FA40030 */        lw $a0, 0x30($sp)
  /* 037260 80036660 27A50028 */     addiu $a1, $sp, 0x28
  /* 037264 80036664 0C00C084 */       jal osRecvMesg
  /* 037268 80036668 24060001 */     addiu $a2, $zero, 1
  /* 03726C 8003666C 8FA40034 */        lw $a0, 0x34($sp)
  /* 037270 80036670 0C00D9E5 */       jal func_80036794
  /* 037274 80036674 27A50024 */     addiu $a1, $sp, 0x24
  /* 037278 80036678 93A20026 */       lbu $v0, 0x26($sp)
  /* 03727C 8003667C 93B80027 */       lbu $t8, 0x27($sp)
  /* 037280 80036680 8FBF0014 */        lw $ra, 0x14($sp)
  /* 037284 80036684 30430001 */      andi $v1, $v0, 1
  /* 037288 80036688 10600005 */      beqz $v1, .L800366A0
  /* 03728C 8003668C 304F0002 */      andi $t7, $v0, 2
  /* 037290 80036690 11E00003 */      beqz $t7, .L800366A0
  /* 037294 80036694 00000000 */       nop 
  /* 037298 80036698 1000000B */         b .L800366C8
  /* 03729C 8003669C 24020002 */     addiu $v0, $zero, 2
  .L800366A0:
  /* 0372A0 800366A0 17000003 */      bnez $t8, .L800366B0
  /* 0372A4 800366A4 00000000 */       nop 
  /* 0372A8 800366A8 14600003 */      bnez $v1, .L800366B8
  /* 0372AC 800366AC 30590004 */      andi $t9, $v0, 4
  .L800366B0:
  /* 0372B0 800366B0 10000005 */         b .L800366C8
  /* 0372B4 800366B4 24020001 */     addiu $v0, $zero, 1
  .L800366B8:
  /* 0372B8 800366B8 13200003 */      beqz $t9, .L800366C8
  /* 0372BC 800366BC 8FA2002C */        lw $v0, 0x2c($sp)
  /* 0372C0 800366C0 10000001 */         b .L800366C8
  /* 0372C4 800366C4 24020004 */     addiu $v0, $zero, 4
  .L800366C8:
  /* 0372C8 800366C8 03E00008 */        jr $ra
  /* 0372CC 800366CC 27BD0030 */     addiu $sp, $sp, 0x30

glabel __osPfsRequestOneChannel
  /* 0372D0 800366D0 27BDFFE8 */     addiu $sp, $sp, -0x18
  /* 0372D4 800366D4 3C06800A */       lui $a2, 0x800a
  /* 0372D8 800366D8 240700FE */     addiu $a3, $zero, 0xfe
  /* 0372DC 800366DC 3C01800A */       lui $at, %hi(__osContLastCmd)
  /* 0372E0 800366E0 24C20710 */     addiu $v0, $a2, 0x710
  /* 0372E4 800366E4 AFA5001C */        sw $a1, 0x1c($sp)
  /* 0372E8 800366E8 A027EFE0 */        sb $a3, %lo(__osContLastCmd)($at)
  /* 0372EC 800366EC 240F0001 */     addiu $t7, $zero, 1
  /* 0372F0 800366F0 AC4F003C */        sw $t7, 0x3c($v0)
  /* 0372F4 800366F4 24180001 */     addiu $t8, $zero, 1
  /* 0372F8 800366F8 24190003 */     addiu $t9, $zero, 3
  /* 0372FC 800366FC 240800FF */     addiu $t0, $zero, 0xff
  /* 037300 80036700 240900FF */     addiu $t1, $zero, 0xff
  /* 037304 80036704 240A00FF */     addiu $t2, $zero, 0xff
  /* 037308 80036708 A3B8000C */        sb $t8, 0xc($sp)
  /* 03730C 8003670C A3B9000D */        sb $t9, 0xd($sp)
  /* 037310 80036710 A3A5000E */        sb $a1, 0xe($sp)
  /* 037314 80036714 A3A8000F */        sb $t0, 0xf($sp)
  /* 037318 80036718 A3A90010 */        sb $t1, 0x10($sp)
  /* 03731C 8003671C A3AA0011 */        sb $t2, 0x11($sp)
  /* 037320 80036720 18800010 */      blez $a0, .L80036764
  /* 037324 80036724 00001825 */        or $v1, $zero, $zero
  /* 037328 80036728 30860003 */      andi $a2, $a0, 3
  /* 03732C 8003672C 10C00006 */      beqz $a2, .L80036748
  /* 037330 80036730 00C02825 */        or $a1, $a2, $zero
  .L80036734:
  /* 037334 80036734 24630001 */     addiu $v1, $v1, 1
  /* 037338 80036738 A0400000 */        sb $zero, ($v0)
  /* 03733C 8003673C 14A3FFFD */       bne $a1, $v1, .L80036734
  /* 037340 80036740 24420001 */     addiu $v0, $v0, 1
  /* 037344 80036744 10640007 */       beq $v1, $a0, .L80036764
  .L80036748:
  /* 037348 80036748 24630004 */     addiu $v1, $v1, 4
  /* 03734C 8003674C A0400001 */        sb $zero, 1($v0)
  /* 037350 80036750 A0400002 */        sb $zero, 2($v0)
  /* 037354 80036754 A0400003 */        sb $zero, 3($v0)
  /* 037358 80036758 24420004 */     addiu $v0, $v0, 4
  /* 03735C 8003675C 1464FFFA */       bne $v1, $a0, .L80036748
  /* 037360 80036760 A040FFFC */        sb $zero, -4($v0)
  .L80036764:
  /* 037364 80036764 27AB000C */     addiu $t3, $sp, 0xc
  /* 037368 80036768 8D610000 */        lw $at, ($t3)
  /* 03736C 8003676C 24420006 */     addiu $v0, $v0, 6
  /* 037370 80036770 A841FFFA */       swl $at, -6($v0)
  /* 037374 80036774 B841FFFD */       swr $at, -3($v0)
  /* 037378 80036778 91610004 */       lbu $at, 4($t3)
  /* 03737C 8003677C A041FFFE */        sb $at, -2($v0)
  /* 037380 80036780 916D0005 */       lbu $t5, 5($t3)
  /* 037384 80036784 A0470000 */        sb $a3, ($v0)
  /* 037388 80036788 27BD0018 */     addiu $sp, $sp, 0x18
  /* 03738C 8003678C 03E00008 */        jr $ra
  /* 037390 80036790 A04DFFFF */        sb $t5, -1($v0)

glabel func_80036794
  /* 037394 80036794 3C02800A */       lui $v0, %hi(__osPfsPifRam)
  /* 037398 80036798 27BDFFE8 */     addiu $sp, $sp, -0x18
  /* 03739C 8003679C 24420710 */     addiu $v0, $v0, %lo(__osPfsPifRam)
  /* 0373A0 800367A0 1880000B */      blez $a0, .L800367D0
  /* 0373A4 800367A4 00001825 */        or $v1, $zero, $zero
  /* 0373A8 800367A8 30870003 */      andi $a3, $a0, 3
  /* 0373AC 800367AC 10E00005 */      beqz $a3, .L800367C4
  /* 0373B0 800367B0 00E03025 */        or $a2, $a3, $zero
  .L800367B4:
  /* 0373B4 800367B4 24630001 */     addiu $v1, $v1, 1
  /* 0373B8 800367B8 14C3FFFE */       bne $a2, $v1, .L800367B4
  /* 0373BC 800367BC 24420001 */     addiu $v0, $v0, 1
  /* 0373C0 800367C0 10640003 */       beq $v1, $a0, .L800367D0
  .L800367C4:
  /* 0373C4 800367C4 24630004 */     addiu $v1, $v1, 4
  /* 0373C8 800367C8 1464FFFE */       bne $v1, $a0, .L800367C4
  /* 0373CC 800367CC 24420004 */     addiu $v0, $v0, 4
  .L800367D0:
  /* 0373D0 800367D0 88410000 */       lwl $at, ($v0) # __osPfsPifRam + 0
  /* 0373D4 800367D4 98410003 */       lwr $at, 3($v0) # __osPfsPifRam + 3
  /* 0373D8 800367D8 27AE000C */     addiu $t6, $sp, 0xc
  /* 0373DC 800367DC ADC10000 */        sw $at, ($t6)
  /* 0373E0 800367E0 90410004 */       lbu $at, 4($v0) # __osPfsPifRam + 4
  /* 0373E4 800367E4 A1C10004 */        sb $at, 4($t6)
  /* 0373E8 800367E8 90580005 */       lbu $t8, 5($v0) # __osPfsPifRam + 5
  /* 0373EC 800367EC A1D80005 */        sb $t8, 5($t6)
  /* 0373F0 800367F0 93B9000D */       lbu $t9, 0xd($sp)
  /* 0373F4 800367F4 332800C0 */      andi $t0, $t9, 0xc0
  /* 0373F8 800367F8 00084903 */       sra $t1, $t0, 4
  /* 0373FC 800367FC 312A00FF */      andi $t2, $t1, 0xff
  /* 037400 80036800 15400008 */      bnez $t2, .L80036824
  /* 037404 80036804 A0A90003 */        sb $t1, 3($a1)
  /* 037408 80036808 93AB0010 */       lbu $t3, 0x10($sp)
  /* 03740C 8003680C 93AD000F */       lbu $t5, 0xf($sp)
  /* 037410 80036810 000B6200 */       sll $t4, $t3, 8
  /* 037414 80036814 018D7825 */        or $t7, $t4, $t5
  /* 037418 80036818 A4AF0000 */        sh $t7, ($a1)
  /* 03741C 8003681C 93AE0011 */       lbu $t6, 0x11($sp)
  /* 037420 80036820 A0AE0002 */        sb $t6, 2($a1)
  .L80036824:
  /* 037424 80036824 03E00008 */        jr $ra
  /* 037428 80036828 27BD0018 */     addiu $sp, $sp, 0x18

  /* 03742C 8003682C 00000000 */       nop 
