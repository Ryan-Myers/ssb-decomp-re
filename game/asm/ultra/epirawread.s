.include "macros.inc"

# assembler directives
.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches
.set gp=64     # allow use of 64-bit general purpose registers

.section .text

.align 4

glabel osEPiRawReadIo
  /* 036D50 80036150 3C03A460 */       lui $v1, (0xA4600010 >> 16) # 2757754896
  /* 036D54 80036154 34630010 */       ori $v1, $v1, (0xA4600010 & 0xFFFF) # 2757754896
  /* 036D58 80036158 8C620000 */        lw $v0, ($v1) # PI_STATUS_REG + 0
  /* 036D5C 8003615C 00A03825 */        or $a3, $a1, $zero
  /* 036D60 80036160 304E0003 */      andi $t6, $v0, 3
  /* 036D64 80036164 51C00006 */      beql $t6, $zero, .L80036180
  /* 036D68 80036168 90820009 */       lbu $v0, 9($a0)
  /* 036D6C 8003616C 8C620000 */        lw $v0, ($v1) # PI_STATUS_REG + 0
  .L80036170:
  /* 036D70 80036170 304F0003 */      andi $t7, $v0, 3
  /* 036D74 80036174 55E0FFFE */      bnel $t7, $zero, .L80036170
  /* 036D78 80036178 8C620000 */        lw $v0, ($v1) # PI_STATUS_REG + 0
  /* 036D7C 8003617C 90820009 */       lbu $v0, 9($a0)
  .L80036180:
  /* 036D80 80036180 3C038004 */       lui $v1, %hi(__osCurrentHandle)
  /* 036D84 80036184 90990004 */       lbu $t9, 4($a0)
  /* 036D88 80036188 0002C080 */       sll $t8, $v0, 2
  /* 036D8C 8003618C 00781821 */      addu $v1, $v1, $t8
  /* 036D90 80036190 8C63D430 */        lw $v1, %lo(__osCurrentHandle)($v1)
  /* 036D94 80036194 90680004 */       lbu $t0, 4($v1)
  /* 036D98 80036198 5328003D */      beql $t9, $t0, .L80036290
  /* 036D9C 8003619C 8C8A000C */        lw $t2, 0xc($a0)
  /* 036DA0 800361A0 14400019 */      bnez $v0, .L80036208
  /* 036DA4 800361A4 00602825 */        or $a1, $v1, $zero
  /* 036DA8 800361A8 90820005 */       lbu $v0, 5($a0)
  /* 036DAC 800361AC 90690005 */       lbu $t1, 5($v1)
  /* 036DB0 800361B0 3C0AA460 */       lui $t2, %hi(PI_BSD_DOM1_LAT_REG)
  /* 036DB4 800361B4 3C0CA460 */       lui $t4, %hi(PI_BSD_DOM1_PGS_REG)
  /* 036DB8 800361B8 10490002 */       beq $v0, $t1, .L800361C4
  /* 036DBC 800361BC 3C0EA460 */       lui $t6, %hi(PI_BSD_DOM1_RLS_REG)
  /* 036DC0 800361C0 AD420014 */        sw $v0, %lo(PI_BSD_DOM1_LAT_REG)($t2)
  .L800361C4:
  /* 036DC4 800361C4 90820006 */       lbu $v0, 6($a0)
  /* 036DC8 800361C8 90AB0006 */       lbu $t3, 6($a1)
  /* 036DCC 800361CC 3C18A460 */       lui $t8, %hi(PI_BSD_DOM1_PWD_REG)
  /* 036DD0 800361D0 504B0003 */      beql $v0, $t3, .L800361E0
  /* 036DD4 800361D4 90820007 */       lbu $v0, 7($a0)
  /* 036DD8 800361D8 AD82001C */        sw $v0, %lo(PI_BSD_DOM1_PGS_REG)($t4)
  /* 036DDC 800361DC 90820007 */       lbu $v0, 7($a0)
  .L800361E0:
  /* 036DE0 800361E0 90AD0007 */       lbu $t5, 7($a1)
  /* 036DE4 800361E4 504D0003 */      beql $v0, $t5, .L800361F4
  /* 036DE8 800361E8 90820008 */       lbu $v0, 8($a0)
  /* 036DEC 800361EC ADC20020 */        sw $v0, %lo(PI_BSD_DOM1_RLS_REG)($t6)
  /* 036DF0 800361F0 90820008 */       lbu $v0, 8($a0)
  .L800361F4:
  /* 036DF4 800361F4 90AF0008 */       lbu $t7, 8($a1)
  /* 036DF8 800361F8 504F001B */      beql $v0, $t7, .L80036268
  /* 036DFC 800361FC 908F0004 */       lbu $t7, 4($a0)
  /* 036E00 80036200 10000018 */         b .L80036264
  /* 036E04 80036204 AF020018 */        sw $v0, %lo(PI_BSD_DOM1_PWD_REG)($t8)
  .L80036208:
  /* 036E08 80036208 90820005 */       lbu $v0, 5($a0)
  /* 036E0C 8003620C 90B90005 */       lbu $t9, 5($a1)
  /* 036E10 80036210 3C08A460 */       lui $t0, %hi(PI_BSD_DOM2_LAT_REG)
  /* 036E14 80036214 3C0AA460 */       lui $t2, %hi(PI_BSD_DOM2_PGS_REG)
  /* 036E18 80036218 10590002 */       beq $v0, $t9, .L80036224
  /* 036E1C 8003621C 3C0CA460 */       lui $t4, %hi(PI_DRAM_ADDR_REG)
  /* 036E20 80036220 AD020024 */        sw $v0, %lo(PI_BSD_DOM2_LAT_REG)($t0)
  .L80036224:
  /* 036E24 80036224 90820006 */       lbu $v0, 6($a0)
  /* 036E28 80036228 90A90006 */       lbu $t1, 6($a1)
  /* 036E2C 8003622C 3C0EA460 */       lui $t6, %hi(PI_BSD_DOM2_PWD_REG)
  /* 036E30 80036230 50490003 */      beql $v0, $t1, .L80036240
  /* 036E34 80036234 90820007 */       lbu $v0, 7($a0)
  /* 036E38 80036238 AD42002C */        sw $v0, %lo(PI_BSD_DOM2_PGS_REG)($t2)
  /* 036E3C 8003623C 90820007 */       lbu $v0, 7($a0)
  .L80036240:
  /* 036E40 80036240 90AB0007 */       lbu $t3, 7($a1)
  /* 036E44 80036244 504B0003 */      beql $v0, $t3, .L80036254
  /* 036E48 80036248 90820008 */       lbu $v0, 8($a0)
  /* 036E4C 8003624C AD820030 */        sw $v0, %lo(PI_BSD_DOM2_RLS_REG)($t4)
  /* 036E50 80036250 90820008 */       lbu $v0, 8($a0)
  .L80036254:
  /* 036E54 80036254 90AD0008 */       lbu $t5, 8($a1)
  /* 036E58 80036258 504D0003 */      beql $v0, $t5, .L80036268
  /* 036E5C 8003625C 908F0004 */       lbu $t7, 4($a0)
  /* 036E60 80036260 ADC20028 */        sw $v0, %lo(PI_BSD_DOM2_PWD_REG)($t6)
  .L80036264:
  /* 036E64 80036264 908F0004 */       lbu $t7, 4($a0)
  .L80036268:
  /* 036E68 80036268 A0AF0004 */        sb $t7, 4($a1)
  /* 036E6C 8003626C 90980005 */       lbu $t8, 5($a0)
  /* 036E70 80036270 A0B80005 */        sb $t8, 5($a1)
  /* 036E74 80036274 90990006 */       lbu $t9, 6($a0)
  /* 036E78 80036278 A0B90006 */        sb $t9, 6($a1)
  /* 036E7C 8003627C 90880007 */       lbu $t0, 7($a0)
  /* 036E80 80036280 A0A80007 */        sb $t0, 7($a1)
  /* 036E84 80036284 90890008 */       lbu $t1, 8($a0)
  /* 036E88 80036288 A0A90008 */        sb $t1, 8($a1)
  /* 036E8C 8003628C 8C8A000C */        lw $t2, 0xc($a0)
  .L80036290:
  /* 036E90 80036290 3C01A000 */       lui $at, 0xa000
  /* 036E94 80036294 00001025 */        or $v0, $zero, $zero
  /* 036E98 80036298 01475825 */        or $t3, $t2, $a3
  /* 036E9C 8003629C 01616025 */        or $t4, $t3, $at
  /* 036EA0 800362A0 8D8D0000 */        lw $t5, %lo(PI_DRAM_ADDR_REG)($t4)
  /* 036EA4 800362A4 03E00008 */        jr $ra
  /* 036EA8 800362A8 ACCD0000 */        sw $t5, ($a2)

  /* 036EAC 800362AC 00000000 */       nop 

# Likely start of new file
glabel osMapTLBRdb
  /* 036EB0 800362B0 40085000 */      mfc0 $t0, $10
  /* 036EB4 800362B4 2409001F */     addiu $t1, $zero, 0x1f
  /* 036EB8 800362B8 40890000 */      mtc0 $t1, $0
  /* 036EBC 800362BC 40802800 */      mtc0 $zero, $5
  /* 036EC0 800362C0 240A0017 */     addiu $t2, $zero, 0x17
  /* 036EC4 800362C4 3C09C000 */       lui $t1, 0xc000
  /* 036EC8 800362C8 40895000 */      mtc0 $t1, $10
  /* 036ECC 800362CC 3C098000 */       lui $t1, 0x8000
  /* 036ED0 800362D0 00095982 */       srl $t3, $t1, 6
  /* 036ED4 800362D4 016A5825 */        or $t3, $t3, $t2
  /* 036ED8 800362D8 408B1000 */      mtc0 $t3, $2
  /* 036EDC 800362DC 24090001 */     addiu $t1, $zero, 1
  /* 036EE0 800362E0 40891800 */      mtc0 $t1, $3
  /* 036EE4 800362E4 00000000 */       nop 
  /* 036EE8 800362E8 42000002 */     tlbwi 
  /* 036EEC 800362EC 00000000 */       nop 
  /* 036EF0 800362F0 00000000 */       nop 
  /* 036EF4 800362F4 00000000 */       nop 
  /* 036EF8 800362F8 00000000 */       nop 
  /* 036EFC 800362FC 40885000 */      mtc0 $t0, $10
  /* 036F00 80036300 03E00008 */        jr $ra
  /* 036F04 80036304 00000000 */       nop 

  /* 036F08 80036308 00000000 */       nop 
  /* 036F0C 8003630C 00000000 */       nop 
